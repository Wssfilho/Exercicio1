<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>Agricultura 4.0</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <form id="agriculturaForm">
        <label for="latitude">Latitude do Atuador:</label><br>
        <input type="text" id="latitude" name="latitude"><br>
        <label for="longitude">Longitude do Atuador:</label><br>
        <input type="number" id="longitude" name="longitude"><br><br>
        <input type="button" value="Enviar" onclick="criar()">
        <input type="button" value="Status" onclick="status()">
        <input type="reset" value="Redefinir" onclick="">
        <div id="info">
            <input type=text required name='txtstart' id="txtstart" style='width:150px' value=''>
        </div>
        <div id="tipo">
            <label for="plantacao">Status da Bomba: </label><br>
            <input type=text required name='tipo' id="tipo" style='width:150px' value=''>
        </div>

    </form>

</body>

<script>
    class Sensor {
        constructor(id, descricao, valorLeitura) {
            this.id = id;
            this.descricao = descricao;
            this.valorLeitura = valorLeitura;
        }
    }
    
    class Bomba extends Sensor {
        constructor(id, descricao, valorLeitura, status) {
            super(id, descricao, valorLeitura);
            this.status = status; // true para ligada, false para desligada
        }
    
        ligar() {
            this.status = true;
        }
    
        desligar() {
            this.status = false;
        }
    }
    
    class AtuadorGeoreferenciado extends Bomba {
        constructor(id, descricao, valorLeitura, status, latitude, longitude) {
            super(id, descricao, valorLeitura, status);
            this.latitude = latitude;
            this.longitude = longitude;
        }
    }
    
    var atuadores = []; // array para armazenar os objetos
    
    function criar() {
        var latitude = document.querySelector("#latitude").value;
        var longitude = document.querySelector("#longitude").value;
    
        if (latitude == "" || longitude == "") {
            alert("Preencha todos os campos!");
            return;
        }
    
        var novoAtuador = new AtuadorGeoreferenciado(1, "Atuador Principal", 0, false, latitude, longitude);
    
        atuadores.push(novoAtuador); // adiciona o novo objeto ao array
    }
    
    function status() {
    
        var AtuadorGeoreferenciado = atuadores[atuadores.length - 1]; // pega o último objeto adicionado
    
        if (AtuadorGeoreferenciado.latitude > 0 && AtuadorGeoreferenciado.longitude <= 3) {
    
            document.querySelector("[name='txtstart']").value = "Fase inicial.";
            AtuadorGeoreferenciado.ligar();
            document.querySelector("[name='tipo']").value = AtuadorGeoreferenciado.status ? "Bomba Ligada" : "Bomba Desligada";
        }
        else if (AtuadorGeoreferenciado.latitude > 3 && AtuadorGeoreferenciado.longitude <= 6) {
    
            document.querySelector("[name='txtstart']").value = "Fase de crescimento.";
            AtuadorGeoreferenciado.desligar();
            document.querySelector("[name='tipo']").value = AtuadorGeoreferenciado.status ? "Bomba Ligada" : "Bomba Desligada";
    
        }
        else if (AtuadorGeoreferenciado.latitude > 6 && AtuadorGeoreferenciado.longitude <= 9) {
    
            document.querySelector("[name='txtstart']").value = "Fase de maturação.";
            AtuadorGeoreferenciado.ligar();
            document.querySelector("[name='tipo']").value = AtuadorGeoreferenciado.status ? "Bomba Ligada" : "Bomba Desligada";
    
        }
        else if (AtuadorGeoreferenciado.latitude > 9 && AtuadorGeoreferenciado.longitude <= 12) {
    
            document.querySelector("[name='txtstart']").value = "Fase de colheita.";
            AtuadorGeoreferenciado.desligar();
            document.querySelector("[name='tipo']").value = AtuadorGeoreferenciado.status ? "Bomba Ligada" : "Bomba Desligada";
    
        }
    }
    
</script>

</html>